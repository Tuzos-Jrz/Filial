(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{2698:function(e,t,a){"use strict";var s=a("970b"),n=a.n(s),i=a("5bc3"),l=a.n(i),o=a("b2f5"),r=a.n(o),c=a("6bfe"),p=function(){function e(t){n()(this,e);var a=c["a"].pObject(t.CpanelIntegrator);r.a.isEmpty(a)||(this.allowAliases=c["a"].pBool(a.AllowAliases),this.allowCreateDeleteAccountOnCpanel=c["a"].pBool(a.AllowCreateDeleteAccountOnCpanel),this.cpanelHasPassword=c["a"].pBool(a.CpanelHasPassword),this.cpanelHost=c["a"].pString(a.CpanelHost),this.panelPort=c["a"].pString(a.CpanelPort),this.panelUser=c["a"].pString(a.CpanelUser))}return l()(e,[{key:"saveCpanelSettings",value:function(e){var t=e.cpanelHasPassword,a=e.cpanelHost,s=e.panelPort,n=e.panelUser;this.cpanelHasPassword=t,this.cpanelHost=a,this.panelPort=s,this.panelUser=n}}]),e}(),d=null;t["a"]={init:function(e){d=new p(e)},saveCpanelSettings:function(e){d.saveCpanelSettings(e)},getCpanelSettings:function(){return{allowAliases:d.allowAliases,allowCreateDeleteAccountOnCpanel:d.allowCreateDeleteAccountOnCpanel,cpanelHasPassword:d.cpanelHasPassword,cpanelHost:d.cpanelHost,panelPort:d.panelPort,panelUser:d.panelUser}}}},3365:function(e,t,a){"use strict";a("b7b1")},"8f88":function(e,t,a){"use strict";a.r(t);a("c7fe"),a("3119"),a("8da0"),a("b5bb"),a("a2b7");var s=a("0091"),n=a("2698"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-scroll-area",{staticClass:"full-height full-width"},[a("div",{staticClass:"q-pa-lg "},[a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.HEADING_SETTINGS_TAB",expression:"'CPANELINTEGRATOR.HEADING_SETTINGS_TAB'"}],staticClass:"col text-h5"})]),a("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.LABEL_CPANEL_HOST",expression:"'CPANELINTEGRATOR.LABEL_CPANEL_HOST'"}],staticClass:"col-2 q-my-sm"}),a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.cpanelHost,callback:function(t){e.cpanelHost=t},expression:"cpanelHost"}})],1)]),a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.LABEL_CPANEL_PORT",expression:"'CPANELINTEGRATOR.LABEL_CPANEL_PORT'"}],staticClass:"col-2 q-my-sm"}),a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.cpanelPort,callback:function(t){e.cpanelPort=t},expression:"cpanelPort"}})],1)]),a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.LABEL_CPANEL_USER",expression:"'CPANELINTEGRATOR.LABEL_CPANEL_USER'"}],staticClass:"col-2 q-my-sm"}),a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.cpanelUser,callback:function(t){e.cpanelUser=t},expression:"cpanelUser"}})],1)]),a("div",{staticClass:"row"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.LABEL_CPANEL_PASS",expression:"'CPANELINTEGRATOR.LABEL_CPANEL_PASS'"}],staticClass:"col-2 q-my-sm"}),a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)])])],1),a("div",{staticClass:"q-pt-md text-right"},[a("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.save}})],1)],1),a("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.saving}},[a("q-linear-progress",{attrs:{query:""}})],1)],1)},l=[],o=a("4245"),r=a("21ac"),c=a("6bfe"),p=a("e539"),d="     ",u={name:"CpanelAdminSettingsPerTenant",data:function(){return{saving:!1,loading:!1,cpanelHost:"",cpanelPort:"",cpanelUser:"",cpanelHasPassword:!1,password:d,savedPass:d}},computed:{tenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenants:function(){return this.$store.getters["tenants/getTenants"]}},watch:{allTenants:function(){this.populate()}},beforeRouteLeave:function(e,t,a){this.doBeforeRouteLeave(e,t,a)},mounted:function(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges:function(){var e;if(this.loading)return!1;var t=c["a"].pObject(null===(e=this.tenant)||void 0===e?void 0:e.completeData),a=t["CpanelIntegrator::CpanelPort"];return this.cpanelHost!==t["CpanelIntegrator::CpanelHost"]||c["a"].pInt(this.cpanelPort)!==a||this.cpanelUser!==t["CpanelIntegrator::CpanelUser"]||this.password!==this.savedPass},revertChanges:function(){var e,t=c["a"].pObject(null===(e=this.tenant)||void 0===e?void 0:e.completeData);this.cpanelHost=t["CpanelIntegrator::CpanelHost"],this.cpanelPort=t["CpanelIntegrator::CpanelPort"],this.cpanelUser=t["CpanelIntegrator::CpanelUser"],this.password=this.savedPass},populate:function(){var e=this.$store.getters["tenants/getTenant"](this.tenantId);e&&(void 0!==e.completeData["CpanelIntegrator::CpanelHost"]?(this.tenant=e,this.cpanelHost=e.completeData["CpanelIntegrator::CpanelHost"],this.cpanelPort=e.completeData["CpanelIntegrator::CpanelPort"],this.cpanelUser=e.completeData["CpanelIntegrator::CpanelUser"],this.cpanelHasPassword=e.completeData["CpanelIntegrator::CpanelHasPassword"]):this.getSettings())},save:function(){var e=this;if(!this.saving){this.saving=!0;var t={CpanelHost:this.cpanelHost,CpanelPort:c["a"].pInt(this.cpanelPort),CpanelUser:this.cpanelUser,TenantId:this.tenantId};this.password!==d&&(t.CpanelPassword=this.password),p["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"UpdateSettings",parameters:t}).then((function(a){if(e.saving=!1,!0===a){e.savedPass=e.password;var s={"CpanelIntegrator::CpanelHost":t.CpanelHost,"CpanelIntegrator::CpanelPort":t.CpanelPort,"CpanelIntegrator::CpanelUser":t.CpanelUser,"CpanelIntegrator::CpanelHasPassword":""!==e.password};e.$store.commit("tenants/setTenantCompleteData",{id:e.tenantId,data:s}),r["a"].showReport(e.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else r["a"].showError(e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(t){e.saving=!1,r["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings:function(){var e=this;this.loading=!0;var t={TenantId:this.tenantId};p["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"GetSettings",parameters:t}).then((function(t){if(e.loading=!1,t){var a={"CpanelIntegrator::CpanelHost":c["a"].pString(t.CpanelHost),"CpanelIntegrator::CpanelPort":c["a"].pInt(t.CpanelPort),"CpanelIntegrator::CpanelUser":c["a"].pString(t.CpanelUser),"CpanelIntegrator::CpanelHasPassword":c["a"].pBool(t.CpanelHasPassword)};e.$store.commit("tenants/setTenantCompleteData",{id:e.tenantId,data:a})}}),(function(e){r["a"].showError(o["a"].getTextFromResponse(e))}))}}},m=u,C=a("2877"),h=a("4983"),v=a("f09f"),A=a("a370"),g=a("27f9"),E=a("9c40"),T=a("74f7"),I=a("6b1d"),N=a("eebe"),f=a.n(N),R=Object(C["a"])(m,i,l,!1,null,"ad37eda4",null),L=R.exports;f()(R,"components",{QScrollArea:h["a"],QCard:v["a"],QCardSection:A["a"],QInput:g["a"],QBtn:E["a"],QInnerLoading:T["a"],QLinearProgress:I["a"]});var w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-scroll-area",{staticClass:"full-height full-width"},[a("div",{staticClass:"q-pa-lg "},[a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.HEADING_SETTINGS_TAB_ALIASES",expression:"'CPANELINTEGRATOR.HEADING_SETTINGS_TAB_ALIASES'"}],staticClass:"col text-h5"})]),a("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.LABEL_ALIAS",expression:"'CPANELINTEGRATOR.LABEL_ALIAS'"}],staticClass:"col-2 q-mt-sm"}),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.aliasName,callback:function(t){e.aliasName=t},expression:"aliasName"}})],1),a("div",{staticClass:"q-ml-sm q-mr-xs"},[a("span",{staticClass:"text-h6"},[a("b",[e._v("@")])])]),a("div",[a("q-select",{staticClass:"domains-select",attrs:{outlined:"",dense:"","bg-color":"white",options:e.domains,"option-label":"name"},model:{value:e.selectedDomain,callback:function(t){e.selectedDomain=t},expression:"selectedDomain"}})],1),a("div",{staticClass:"col-3 q-mt-xs q-ml-md"},[a("q-btn",{staticClass:"q-ml-md q-px-sm",attrs:{unelevated:"","no-caps":"","no-wrap":"",dense:"",disable:!e.aliasName.length,ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_ADD_NEW_ALIAS")},on:{click:e.addNewAlias}})],1)]),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-2"}),a("div",{staticClass:"col-5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedAliases,expression:"selectedAliases"}],staticClass:"select",attrs:{size:"9",multiple:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedAliases=t.target.multiple?a:a[0]}}},e._l(e.aliasesList,(function(t){return a("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"col-3 q-mt-xs q-ml-md",staticStyle:{position:"relative"}},[a("div",{staticStyle:{position:"absolute",bottom:"3px"}},[a("q-btn",{staticClass:"q-ml-md q-px-sm",attrs:{unelevated:"","no-caps":"","no-wrap":"",dense:"",ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_DELETE_ALIASES")},on:{click:e.deleteAliasesList}})],1)])])])],1)],1),a("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.saving||e.deleting}},[a("q-linear-progress",{attrs:{query:""}})],1)],1)},P=[],S=(a("f108"),a("b2f5")),_=a.n(S),b={name:"CpanelAliasesAdminSettingsPerUser",data:function(){return{loading:!1,saving:!1,deleting:!1,aliasName:"",selectedDomain:null,selectedAliases:[],aliasesList:[],user:null}},computed:{currentTenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},domains:function(){var e=this.$store.getters["maildomains/getDomains"];return c["a"].pArray(e[this.currentTenantId])}},watch:{domains:function(){this.domains.length>0&&(this.selectedDomain=this.domains[0])}},beforeRouteLeave:function(e,t,a){this.doBeforeRouteLeave(e,t,a)},mounted:function(){this.requestDomains(),this.parseRoute(),null===this.selectedDomain&&this.domains.length>0&&(this.selectedDomain=this.domains[0])},methods:{hasChanges:function(){return""!==this.aliasName},revertChanges:function(){this.aliasName=""},requestDomains:function(){this.$store.dispatch("maildomains/requestDomainsIfNecessary",{tenantId:this.currentTenantId})},parseRoute:function(){var e,t,a,s=c["a"].pPositiveInt(null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.id);(null===(a=this.user)||void 0===a?void 0:a.id)!==s&&(this.user={id:s},this.populate())},populate:function(){this.getSettings()},addNewAlias:function(){var e=this;if(!this.saving){var t,a;this.saving=!0;var s={UserId:null===(t=this.user)||void 0===t?void 0:t.id,AliasName:this.aliasName,AliasDomain:null===(a=this.selectedDomain)||void 0===a?void 0:a.name,TenantId:this.currentTenantId};p["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"AddNewAlias",parameters:s}).then((function(t){e.saving=!1,!0===t?(e.aliasName="",e.populate()):r["a"].showError(e.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED"))}),(function(t){e.saving=!1,r["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED")))}))}},deleteAliasesList:function(){var e=this;if(!this.deleting)if(this.deleting=!0,this.selectedAliases.length){var t,a={UserId:null===(t=this.user)||void 0===t?void 0:t.id,Aliases:this.selectedAliases,TenantId:this.tenantId};p["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"DeleteAlias",parameters:a}).then((function(t){e.deleting=!1,!0===t&&e.populate()}),(function(t){e.deleting=!1,r["a"].showError(o["a"].getTextFromResponse(t))}))}else this.deleting=!1,r["a"].showError(this.$t("CPANELINTEGRATOR.ERROR_EMPTY_ALIASES"))},getSettings:function(){var e,t=this;this.loading=!0;var a={UserId:null===(e=this.user)||void 0===e?void 0:e.id,TenantId:this.currentTenantId};p["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"GetAliases",parameters:a}).then((function(e){t.loading=!1,_.a.isArray(e.Aliases)&&(t.aliasesList=e.Aliases)}),(function(e){t.loading=!1,r["a"].showError(o["a"].getTextFromResponse(e))}))}}},q=b,O=(a("3365"),a("ddd8")),y=Object(C["a"])(q,w,P,!1,null,"04cd9ec0",null),D=y.exports;f()(y,"components",{QScrollArea:h["a"],QCard:v["a"],QCardSection:A["a"],QInput:g["a"],QSelect:O["a"],QBtn:E["a"],QInnerLoading:T["a"],QLinearProgress:I["a"]});t["default"]={moduleName:"CpanelIntegrator",requiredModules:[],init:function(e){n["a"].init(e)},getAdminSystemTabs:function(){return[{tabName:"cpanel",tabTitle:"CPANELINTEGRATOR.ADMIN_SETTINGS_TAB_LABEL",tabRouteChildren:[{path:"cpanel",component:function(){return a.e(20).then(a.bind(null,"7a66"))}}]}]},getAdminTenantTabs:function(){return[{tabName:"cpanel",tabTitle:"CPANELINTEGRATOR.ADMIN_SETTINGS_TAB_LABEL",tabRouteChildren:[{path:"id/:id/cpanel",component:L},{path:"search/:search/id/:id/cpanel",component:L},{path:"page/:page/id/:id/cpanel",component:L},{path:"search/:search/page/:page/id/:id/cpanel",component:L}]}]},getAdminUserTabs:function(){return s["a"].isModuleAvailable("MailDomains")?[{tabName:"cpanel-aliases",tabTitle:"CPANELINTEGRATOR.LABEL_SETTINGS_TAB_ALIASES",tabRouteChildren:[{path:"id/:id/cpanel-aliases",component:D},{path:"search/:search/id/:id/cpanel-aliases",component:D},{path:"page/:page/id/:id/cpanel-aliases",component:D},{path:"search/:search/page/:page/id/:id/cpanel-aliases",component:D}]}]:[]}}},b7b1:function(e,t,a){}}]);