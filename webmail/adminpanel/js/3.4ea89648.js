(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"163f":function(e,t,n){},"27e8":function(e,t,n){"use strict";n("3dc4")},3863:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 1024 1024",width:e.size,height:e.size}},[n("path",{attrs:{fill:e.color,d:"M510.687 147.375c-59.743 0-107.353 23.892-139.25 62.438-28.45 34.381-44.181 79.901-49.75 130-1.312 2.271-2.085 4.994-2.085 7.899 0 1.527 0.214 3.003 0.613 4.402-0.031-0.071-0.024-0.030-0.028 0.012-11.117 12.446-17.188 29.707-17.188 48.938 0 23.166 10.003 42.515 26.25 54.25 13.986 53.199 42.283 100.998 79.5 133.312-1.162 33.441-10.747 56.671-26.063 74.5-16.32 18.999-39.792 32.465-67.375 42.938-30.092 11.403-67.308 29.141-99.875 54.688s-60.952 59.404-69.812 102.75c-0.211 0.976-0.333 2.097-0.333 3.247 0 8.844 7.17 16.014 16.014 16.014 7.715 0 14.156-5.456 15.675-12.72 6.837-33.462 29.357-61.475 58.206-84.104s63.576-39.356 91.5-49.938c30.402-11.543 59.049-27.247 80.313-52 16.447-19.146 27.716-43.807 32.062-73.938 21.946 12.25 45.858 19.938 71.625 19.938 30.748 0 59.073-10.322 84.188-27.313 3.477 33.426 14.894 60.676 32.625 81.313 21.268 24.753 49.894 40.457 80.312 52 27.909 10.581 62.647 27.307 91.5 49.938s51.368 50.644 58.188 84c1.537 7.368 7.978 12.823 15.693 12.823 8.844 0 16.014-7.17 16.014-16.014 0-1.15-0.121-2.271-0.351-3.352-8.842-43.243-37.223-77.099-69.794-102.645s-69.8-43.285-99.875-54.688c-27.598-10.473-51.051-23.939-67.375-42.938s-26.5-43.667-26.5-80.812c0.002-0.082 0.002-0.178 0.002-0.275 0-1.412-0.183-2.782-0.527-4.086 31.017-31.404 54.404-74.458 66.963-121.326 17.937-11.017 29.25-31.211 29.25-55.562 0-20.347-7.717-37.757-20.25-50.25-4.318-54.827-20.492-104.846-51.437-141.812-31.889-38.093-79.262-61.625-138.625-61.625zM510.687 179.375c51.197 0 87.808 18.825 114.063 50.187 17.716 21.162 30.037 48.863 37.5 80.313-30.984 2.865-53.466-6.867-74.062-31.188-2.953-3.456-7.316-5.633-12.188-5.633-0.176 0-0.351 0.003-0.525 0.008-5.461 0.161-10.236 3.061-12.999 7.373-31.894 50.755-84.994 63.862-133.101 64.439-36.026 0.431-61.518-5.45-75.062-9 5.795-42.099 19.622-78.947 41.75-105.687 26.28-31.758 63.104-50.812 114.625-50.812zM578.625 310c24.671 22.015 54.412 34.951 89.125 31.875 0.618 5.283 1.648 10.309 2 15.75 0.334 5.068 2.98 9.455 6.884 12.153 5.337 3.651 12.366 15.811 12.366 31.285 0 19.011-10.397 31.355-15.375 32.625-5.663 1.502-10.028 5.888-11.475 11.451-21.879 85.925-83.742 152.861-151.462 152.861-67.971 0-130.076-67.453-151.687-153.687-1.278-5.041-4.822-9.057-9.456-10.961-5.233-2.077-14.544-14.505-14.544-32.289 0-14.134 5.797-25.642 10.938-30.062 1.154-1.026 2.147-2.199 2.959-3.495 16.503 4.11 43.178 9.822 80.852 9.37 49.615-0.595 109.038-16.222 148.875-66.875z"}})])},i=[],s=(n("a9e3"),{name:"TeamGroup",props:{size:{type:Number,default:32},color:{type:String,default:"#000"}}}),r=s,o=n("2877"),l=Object(o["a"])(r,a,i,!1,null,"a04475b2",null);t["a"]=l.exports},"3dc4":function(e,t,n){},5337:function(e,t,n){"use strict";n.r(t);n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("99af");var a=n("81c5"),i=(n("159b"),n("2ef0")),s=n.n(i),r=n("0091"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-scroll-area",{staticClass:"full-height full-width relative-position"},[n("div",{staticClass:"q-pa-lg "},[n("div",{staticClass:"row q-mb-md"},[e.createMode?e._e():n("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.HEADING_COMMON_SETTINGS",expression:"'COREWEBCLIENT.HEADING_COMMON_SETTINGS'"}],staticClass:"col text-h5"}),e.createMode?n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.HEADING_CREATE_USER",expression:"'ADMINPANELWEBCLIENT.HEADING_CREATE_USER'"}],staticClass:"col text-h5"}):e._e()]),n("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[n("q-card-section",[n(e.mainDataComponent,{ref:"mainDataComponent",tag:"component",attrs:{currentTenantId:e.currentTenantId,user:e.user,createMode:e.createMode},on:{save:e.handleSave}}),e.allowMakeTenant?n("div",{staticClass:"row"},[n("div",{staticClass:"col-2"}),n("div",{staticClass:"col-5"},[n("q-checkbox",{attrs:{dense:"",label:e.$t("ADMINPANELWEBCLIENT.LABEL_USER_IS_TENANT_ADMIN")},model:{value:e.isTenantAdmin,callback:function(t){e.isTenantAdmin=t},expression:"isTenantAdmin"}})],1)]):e._e(),e.createMode?e._e():n("div",{staticClass:"row q-mt-md"},[n("div",{staticClass:"col-2"}),n("div",{staticClass:"col-5"},[n("q-checkbox",{attrs:{dense:"",label:e.$t("ADMINPANELWEBCLIENT.LABEL_LOGGING_SEPARATE_LOG_FOR_USER")},model:{value:e.writeSeparateLog,callback:function(t){e.writeSeparateLog=t},expression:"writeSeparateLog"}})],1)]),e._l(e.otherDataComponents,(function(t){return n(t,{key:t.name,ref:"otherDataComponents",refInFor:!0,tag:"component",attrs:{currentTenantId:e.currentTenantId,user:e.user,createMode:e.createMode},on:{save:e.handleSave}})})),!e.createMode&&e.allTenantGroups.length>0?n("div",{staticClass:"row q-mt-md"},[n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.LABEL_USER_GROUPS",expression:"'ADMINPANELWEBCLIENT.LABEL_USER_GROUPS'"}],staticClass:"col-2 q-mt-sm"}),n("div",{staticClass:"col-10"},[n("q-select",{attrs:{dense:"",outlined:"","bg-color":"white","use-input":"","use-chips":"",multiple:"",options:e.groupOptions},on:{filter:e.getGroupOptions},scopedSlots:e._u([{key:"selected",fn:function(){return[e.selectedGroupOptions?n("span",{staticClass:"groups-container"},e._l(e.selectedGroupOptions,(function(t){return n("q-chip",{key:t.value,attrs:{flat:"",removable:""},on:{remove:function(n){return e.removeFromSelectedGroups(t.value)}}},[n("div",{staticClass:"ellipsis"},[e._v("\n                      "+e._s(t.label)+"\n                    ")])])})),1):e._e()]},proxy:!0},{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.LABEL_GROUPS_NO_OPTIONS",expression:"'ADMINPANELWEBCLIENT.LABEL_GROUPS_NO_OPTIONS'"}],staticClass:"text-grey"})],1)]},proxy:!0},{key:"option",fn:function(t){return[n("q-item",e._g(e._b({directives:[{name:"close-popup",rawName:"v-close-popup"}]},"q-item",t.itemProps,!1),t.itemEvents),[n("q-item-section",{staticClass:"non-selectable"},[n("q-item-label",[e._v("\n                      "+e._s(t.opt.label)+"\n                    ")])],1)],1)]}}],null,!1,2906905766),model:{value:e.selectedGroupOptions,callback:function(t){e.selectedGroupOptions=t},expression:"selectedGroupOptions"}})],1)]):e._e()],2)],1),n("div",{staticClass:"q-pt-md text-right"},[e.createMode?e._e():n("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"negative",label:e.$t("ADMINPANELWEBCLIENT.ACTION_DELETE_USER")},on:{click:e.deleteUser}}),e.createMode?e._e():n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.handleSave}}),e.createMode?n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_CREATE")},on:{click:e.handleSave}}):e._e(),e.createMode?n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"secondary",label:e.$t("COREWEBCLIENT.ACTION_CANCEL")},on:{click:e.cancel}}):e._e()],1)],1),n("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.deleting||e.saving}},[n("q-linear-progress",{attrs:{query:""}})],1)],1)},l=[],u=n("c973"),c=n.n(u),d=(n("96cf"),n("4de4"),n("d81d"),n("b0c0"),n("fb6a"),n("4e82"),n("ac1f"),n("00b4"),n("4245")),p=n("21ac"),h=n("6bfe"),E=n("e539"),m=n("11cb"),N=n("83d6"),v=n("3de8"),T={},f={name:"EditUser",props:{deletingIds:Array,createMode:Boolean},data:function(){return{mainDataComponent:null,otherDataComponents:[],allowMakeTenant:N["a"].getEnableMultiTenant()||!0,user:null,publicId:"",isTenantAdmin:!1,writeSeparateLog:!1,selectedGroupOptions:[],groupOptions:[],loading:!1,saving:!1}},computed:{currentTenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenantGroups:function(){var e=this.$store.getters["groups/getGroups"],t=h["a"].pArray(e[this.currentTenantId]);return t.filter((function(e){return!e.isTeam}))},deleting:function(){var e;return-1!==this.deletingIds.indexOf(null===(e=this.user)||void 0===e?void 0:e.id)}},watch:{$route:function(e,t){this.parseRoute(),this.getUserMainDataComponent()},"user.groups":function(){s.a.isArray(this.user.groups)&&(this.selectedGroupOptions=this.user.groups.map((function(e){return{label:e.name,value:e.id}})))}},beforeRouteLeave:function(e,t,n){this.doBeforeRouteLeave(e,t,n)},beforeRouteUpdate:function(e,t,n){this.doBeforeRouteLeave(e,t,n)},mounted:function(){T=a["a"].getUserRoles(),this.getUserMainDataComponent(),this.getUserOtherDataComponents(),this.loading=!1,this.saving=!1,this.parseRoute()},methods:{getUserMainDataComponent:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].getUserMainDataComponent();case 2:e.mainDataComponent=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getUserOtherDataComponents:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].getUserOtherDataComponents();case 2:e.otherDataComponents=t.sent;case 3:case"end":return t.stop()}}),t)})))()},parseRoute:function(){if(this.createMode){var e=new v["a"](this.currentTenantId,{});this.fillUp(e)}else{var t,n,a,i=h["a"].pPositiveInt(null===(t=this.$route)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id);(null===(a=this.user)||void 0===a?void 0:a.id)!==i&&(this.user={id:i},this.populate())}},clear:function(){this.publicId="",this.isTenantAdmin=!1,this.writeSeparateLog=!1},fillUp:function(e){this.user=e,this.publicId=e.publicId,this.isTenantAdmin=e.role===T.TenantAdmin,this.writeSeparateLog=e.writeSeparateLog,this.selectedGroupOptions=e.groups.map((function(e){return{label:e.name,value:e.id}}))},populate:function(){var e=this;this.clear(),this.loading=!0,m["a"].getUser(this.currentTenantId,this.user.id).then((function(t){var n=t.user,a=t.userId;a===e.user.id&&(e.loading=!1,n?e.fillUp(n):e.$emit("no-user-found"))}))},getGroupOptions:function(e,t,n){var a=this,i=e.toLowerCase(),s=this.selectedGroupOptions.map((function(e){return e.value})),r=this.allTenantGroups.filter((function(e){return-1===s.indexOf(e.id)}));""!==i&&(r=r.filter((function(e){return-1!==e.name.toLowerCase().indexOf(i)}))),t((function(){a.groupOptions=r.map((function(e){return{label:e.name,value:e.id}})).slice(0,100)}))},removeFromSelectedGroups:function(e){this.selectedGroupOptions=this.selectedGroupOptions.filter((function(t){return t.value!==e}))},hasChanges:function(){var e,t,n,a,i,r;if(this.loading)return!1;var o=!!s.a.isFunction(null===(e=this.$refs)||void 0===e||null===(t=e.mainDataComponent)||void 0===t?void 0:t.hasChanges)&&this.$refs.mainDataComponent.hasChanges(),l=!!s.a.isFunction(null===(n=this.$refs)||void 0===n||null===(a=n.otherDataComponents)||void 0===a?void 0:a.some)&&this.$refs.otherDataComponents.some((function(e){return!!s.a.isFunction(e.hasChanges)&&e.hasChanges()}));return o||l||this.isTenantAdmin!==((null===(i=this.user)||void 0===i?void 0:i.role)===T.TenantAdmin)||this.writeSeparateLog!==(null===(r=this.user)||void 0===r?void 0:r.writeSeparateLog)||this.hasGroupChanges()},hasGroupChanges:function(){var e=this.selectedGroupOptions.map((function(e){return e.value})).sort(),t=(this.user.groups||[]).map((function(e){return e.id})).sort();return!s.a.isEqual(e,t)},revertChanges:function(){var e,t,n,a,i,r;s.a.isFunction(null===(e=this.$refs)||void 0===e||null===(t=e.mainDataComponent)||void 0===t?void 0:t.revertChanges)&&this.$refs.mainDataComponent.revertChanges(),s.a.isFunction(null===(n=this.$refs)||void 0===n||null===(a=n.otherDataComponents)||void 0===a?void 0:a.forEach)&&this.$refs.otherDataComponents.forEach((function(e){s.a.isFunction(e.revertChanges)&&e.revertChanges()})),this.isTenantAdmin=(null===(i=this.user)||void 0===i?void 0:i.role)===T.TenantAdmin,this.writeSeparateLog=null===(r=this.user)||void 0===r?void 0:r.writeSeparateLog},isDataValid:function(){var e,t,n,a,i=!s.a.isFunction(null===(e=this.$refs)||void 0===e||null===(t=e.mainDataComponent)||void 0===t?void 0:t.isDataValid)||this.$refs.mainDataComponent.isDataValid(),r=!s.a.isFunction(null===(n=this.$refs)||void 0===n||null===(a=n.otherDataComponents)||void 0===a?void 0:a.every)||this.$refs.otherDataComponents.every((function(e){return!s.a.isFunction(e.isDataValid)||e.isDataValid()}));return i&&r},isUserEmailValid:function(){var e=this.$refs.mainDataComponent.getSaveParameters(),t=e.PublicId,n=t.slice(0,t.lastIndexOf("@")),a=/[@\s]/;return!a.test(n)&&n.length},handleSave:function(){this.isUserEmailValid()?this.save():p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_INVALID_EMAIL_USERNAME_PART"))},save:function(){var e=this;if(!this.saving&&this.isDataValid()){var t,n,a,i;this.saving=!0;var r=s.a.isFunction(null===(t=this.$refs)||void 0===t||null===(n=t.mainDataComponent)||void 0===n?void 0:n.getSaveParameters)?this.$refs.mainDataComponent.getSaveParameters():{},o=s.a.extend({UserId:this.user.id,TenantId:this.user.tenantId,Role:this.isTenantAdmin?T.TenantAdmin:T.NormalUser,WriteSeparateLog:this.writeSeparateLog,Forced:!0,GroupIds:this.selectedGroupOptions.map((function(e){return e.value}))},r);s.a.isFunction(null===(a=this.$refs)||void 0===a||null===(i=a.otherDataComponents)||void 0===i?void 0:i.forEach)&&this.$refs.otherDataComponents.forEach((function(e){var t=s.a.isFunction(e.getSaveParameters)?e.getSaveParameters():{};o=s.a.extend(o,t)})),E["a"].sendRequest({moduleName:"Core",methodName:this.createMode?"CreateUser":"UpdateUser",parameters:o}).then((function(t){e.saving=!1,e.createMode?e.handleCreateResult(t,o):e.handleUpdateResult(t,o)}),(function(t){e.saving=!1;var n=e.createMode?"ERROR_CREATE_ENTITY_USER":"ERROR_UPDATE_ENTITY_USER";p["a"].showError(d["a"].getTextFromResponse(t,e.$t("ADMINPANELWEBCLIENT."+n)))}))}},handleCreateResult:function(e,t){s.a.isSafeInteger(e)?(p["a"].showReport(this.$t("ADMINPANELWEBCLIENT.REPORT_CREATE_ENTITY_USER")),this.user.update(t),this.$emit("user-created",e)):p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_CREATE_ENTITY_USER"))},handleUpdateResult:function(e,t){var n=this;!0===e?(m["a"].getUser(t.TenantId,t.UserId).then((function(e){var a=e.user;a.update(t,n.allTenantGroups),n.populate()})),p["a"].showReport(this.$t("ADMINPANELWEBCLIENT.REPORT_UPDATE_ENTITY_USER"))):p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_UPDATE_ENTITY_USER"))},cancel:function(){this.revertChanges(),this.$emit("cancel-create")},deleteUser:function(){this.$emit("delete-user",this.user.id)}}},g=f,C=(n("27e8"),n("2877")),I=n("4983"),A=n("f09f"),_=n("a370"),R=n("8f8e"),L=n("ddd8"),b=n("b047"),D=n("66e5"),O=n("4074"),M=n("0170"),P=n("9c40"),S=n("74f7"),G=n("6b1d"),w=n("7f67"),U=n("eebe"),B=n.n(U),q=Object(C["a"])(g,o,l,!1,null,"7c1bf763",null),$=q.exports;B()(q,"components",{QScrollArea:I["a"],QCard:A["a"],QCardSection:_["a"],QCheckbox:R["a"],QSelect:L["a"],QChip:b["a"],QItem:D["a"],QItemSection:O["a"],QItemLabel:M["a"],QBtn:P["a"],QInnerLoading:S["a"],QLinearProgress:G["a"]}),B()(q,"directives",{ClosePopup:w["a"]});var W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},x=[],y={name:"Empty"},F=y,k=Object(C["a"])(F,W,x,!1,null,"738f6bae",null),Q=k.exports,V={getAllUserRoutes:function(){var e=this,t=this.getUserRoutes(),n=this.getRouteChildren("User"),a=this.getUserFiltersRoutes(n);return a.forEach((function(a){var i=e.getUserRoutes("".concat(a.path,"/"));t=t.concat(i),n.forEach((function(e){t.push({path:"".concat(a.path,"/").concat(e.path),component:e.component})}))})),t=t.concat(n,a),t},getRouteChildren:function(e){var t=r["a"].getAdminEntityTabs("getAdmin".concat(e,"Tabs")),n=[];return t.forEach((function(e){s.a.isArray(e.tabRouteChildren)&&(n=n.concat(e.tabRouteChildren))})),n},getUserRoutes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[{path:e+"create",component:$},{path:e+"id/:id",component:$},{path:e+"search/:search",component:Q},{path:e+"search/:search/id/:id",component:$},{path:e+"page/:page",component:Q},{path:e+"page/:page/id/:id",component:$},{path:e+"search/:search/page/:page",component:Q},{path:e+"search/:search/page/:page/id/:id",component:$}];return""===e&&t.push({path:"create",component:$}),t},getUserFiltersRoutes:function(){var e=r["a"].getFiltersForUsers(),t=[];return e.forEach((function(e){t.push({path:e.filterRoute,component:Q})})),e.length>1&&e.forEach((function(n){e.forEach((function(e){if(n.filterRoute!==e.filterRoute){var a="".concat(n.filterRoute,"/").concat(e.filterRoute);t.push({path:a,component:Q})}}))})),t}},Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-scroll-area",{staticClass:"full-height full-width relative-position"},[n("div",{staticClass:"q-pa-lg"},[n("div",{staticClass:"row q-mb-md"},[e.createMode?e._e():n("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.HEADING_COMMON_SETTINGS",expression:"'COREWEBCLIENT.HEADING_COMMON_SETTINGS'"}],staticClass:"col text-h5"}),e.createMode?n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.HEADING_CREATE_TENANT",expression:"'ADMINPANELWEBCLIENT.HEADING_CREATE_TENANT'"}],staticClass:"col text-h5"}):e._e()]),n("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[n("q-card-section",[n("div",{staticClass:"row q-mb-md"},[n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.LABEL_PRODUCT_NAME",expression:"'ADMINPANELWEBCLIENT.LABEL_PRODUCT_NAME'"}],staticClass:"col-2 q-mt-sm"}),e.createMode?n("div",{staticClass:"col-5"},[n("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.tenantName,callback:function(t){e.tenantName=t},expression:"tenantName"}})],1):e._e(),e.createMode?e._e():n("div",{staticClass:"col-5 q-mt-sm"},[e._v(e._s(e.tenantName))])]),n("div",{staticClass:"row q-mb-md"},[n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.LABEL_DESCRIPTION",expression:"'ADMINPANELWEBCLIENT.LABEL_DESCRIPTION'"}],staticClass:"col-2 q-mt-sm"}),n("div",{staticClass:"col-5"},[n("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)]),n("div",{staticClass:"row q-mb-md"},[n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.LABEL_WEB_DOMAIN",expression:"'ADMINPANELWEBCLIENT.LABEL_WEB_DOMAIN'"}],staticClass:"col-2 q-mt-sm"}),n("div",{staticClass:"col-5"},[n("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.webDomain,callback:function(t){e.webDomain=t},expression:"webDomain"}})],1)]),n("div",{staticClass:"row"},[n("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_SITENAME",expression:"'COREWEBCLIENT.LABEL_SITENAME'"}],staticClass:"col-2 q-mt-sm"}),n("div",{staticClass:"col-5"},[n("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.tenantSiteName,callback:function(t){e.tenantSiteName=t},expression:"tenantSiteName"}})],1)]),n(e.otherDataComponents,{tag:"component",on:{updateParent:e.getTenantData}})],1)],1),n("div",{staticClass:"q-py-md text-right"},[e.createMode?e._e():n("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"negative",label:e.$t("ADMINPANELWEBCLIENT.ACTION_DELETE_TENANT")},on:{click:e.deleteTenant}}),e.createMode?e._e():n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.save}}),e.createMode?n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_CREATE")},on:{click:e.save}}):e._e(),e.createMode?n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"secondary",label:e.$t("COREWEBCLIENT.ACTION_CANCEL")},on:{click:e.cancel}}):e._e()],1)],1),n("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.deleting||e.saving}},[n("q-linear-progress",{attrs:{query:""}})],1)],1)},H=[],j=(n("a4d3"),n("e01a"),n("1e92")),z={name:"EditTenant",props:{deletingIds:Array},data:function(){return{tenant:null,tenantId:0,tenantName:"",tenantSiteName:"",description:"",webDomain:"",saving:!1,loading:!1,otherDataComponents:null,enableBusinessTenant:!1,enableGroupWare:!1}},computed:{currentTenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenants:function(){return this.$store.getters["tenants/getTenants"]},createMode:function(){var e;return 0===(null===(e=this.tenant)||void 0===e?void 0:e.id)},deleting:function(){var e;return-1!==this.deletingIds.indexOf(null===(e=this.tenant)||void 0===e?void 0:e.id)}},beforeRouteLeave:function(e,t,n){this.doBeforeRouteLeave(e,t,n)},beforeRouteUpdate:function(e,t,n){this.doBeforeRouteLeave(e,t,n)},mounted:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!1,e.saving=!1,e.parseRoute(),t.next=5,r["a"].getTenantOtherDataComponents();case 5:e.otherDataComponents=t.sent;case 6:case"end":return t.stop()}}),t)})))()},watch:{$route:function(){this.parseRoute()},allTenants:function(){this.populate()}},methods:{getTenantData:function(e){this.enableBusinessTenant=e.enableBusinessTenant,this.enableGroupWare=e.enableGroupWare},parseRoute:function(){if("/tenants/create"===this.$route.path){var e=new j["a"];this.fillUp(e)}else{var t,n,a,i=h["a"].pPositiveInt(null===(t=this.$route)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id);(null===(a=this.tenant)||void 0===a?void 0:a.id)!==i&&(this.tenant={id:i},this.populate())}},populate:function(){this.$store.dispatch("tenants/completeTenantData",this.tenant.id);var e=this.$store.getters["tenants/getTenant"](this.tenant.id);e&&(this.fillUp(e),this.loading=void 0===e.completeData.Description)},fillUp:function(e){var t,n;this.tenant=e,this.tenantId=e.id,this.tenantName=e.name,this.tenantSiteName=e.siteName,this.description=null===(t=e.completeData)||void 0===t?void 0:t.Description,this.webDomain=null===(n=e.completeData)||void 0===n?void 0:n.WebDomain},hasChanges:function(){var e,t,n,a,i,s;return!this.loading&&((null===(e=this.tenant)||void 0===e?void 0:e.name)!==this.tenantName||(null===(t=this.tenant)||void 0===t?void 0:t.siteName)!==this.tenantSiteName||(null===(n=this.tenant)||void 0===n||null===(a=n.completeData)||void 0===a?void 0:a.Description)!==this.description||(null===(i=this.tenant)||void 0===i||null===(s=i.completeData)||void 0===s?void 0:s.WebDomain)!==this.webDomain)},revertChanges:function(){this.fillUp(this.tenant)},cancel:function(){this.revertChanges(),this.$emit("cancel-create")},isValid:function(){return""===this.tenantName?(p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_TENANT_NAME_EMPTY")),!1):!/[\\/:*?"<>|]/gi.test(this.tenantName)||(p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_TENANT_NAME_INVALID")),!1)},save:function(){var e=this;if(!this.saving&&this.isValid()){this.saving=!0;var t={Name:this.tenantName,Description:this.description,WebDomain:this.webDomain,SiteName:this.tenantSiteName,"CoreUserGroupsLimits::IsBusiness":this.enableBusinessTenant,"CoreUserGroupsLimits::EnableGroupware":this.enableGroupWare},n=this.createMode;n||(t.TenantId=this.currentTenantId),E["a"].sendRequest({moduleName:"Core",methodName:n?"CreateTenant":"UpdateTenant",parameters:t}).then((function(a){n?e.handleCreateResult(a,t):e.handleUpdateResult(a,t),e.saving=!1}),(function(t){e.saving=!1;var a=n?"ERROR_CREATE_ENTITY_TENANT":"ERROR_UPDATE_ENTITY_TENANT";p["a"].showError(d["a"].getTextFromResponse(t,e.$t("ADMINPANELWEBCLIENT."+a)))}))}},handleCreateResult:function(e){s.a.isSafeInteger(e)?(p["a"].showReport(this.$t("ADMINPANELWEBCLIENT.REPORT_CREATE_ENTITY_TENANT")),this.loading=!1,this.revertChanges(),this.$emit("tenant-created",e)):p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_CREATE_ENTITY_TENANT"))},handleUpdateResult:function(e,t){!0===e?(this.$store.commit("tenants/updateTenant",{id:this.tenantId,data:t}),p["a"].showReport(this.$t("ADMINPANELWEBCLIENT.REPORT_UPDATE_ENTITY_TENANT"))):p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_UPDATE_ENTITY_TENANT"))},deleteTenant:function(){this.$emit("delete-tenant",this.tenant.id)}}},J=z,K=n("27f9"),X=Object(C["a"])(J,Y,H,!1,null,"56d72cb6",null),Z=X.exports;B()(X,"components",{QScrollArea:I["a"],QCard:A["a"],QCardSection:_["a"],QInput:K["a"],QBtn:P["a"],QInnerLoading:S["a"],QLinearProgress:G["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-scroll-area",{staticClass:"full-height full-width relative-position"},[n("div",{staticClass:"q-pa-lg"},[n("div",{staticClass:"row q-mb-md"},[e.createMode?e._e():n("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.HEADING_COMMON_SETTINGS",expression:"'COREWEBCLIENT.HEADING_COMMON_SETTINGS'"}],staticClass:"col text-h5"}),e.createMode?n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.HEADING_CREATE_GROUP",expression:"'ADMINPANELWEBCLIENT.HEADING_CREATE_GROUP'"}],staticClass:"col text-h5"}):e._e()]),n("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[n("q-card-section",[e.isTeamGroup?n("div",{staticClass:"row q-mb-md"},[n("div",{staticClass:"col-7 q-mt-sm"},[e.enableMultiTenant?n("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.INFO_TEAM_GROUP_IN_TENANT",expression:"'ADMINPANELWEBCLIENT.INFO_TEAM_GROUP_IN_TENANT'"}],attrs:{caption:""}}):n("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.INFO_TEAM_GROUP_IN_SYSTEM",expression:"'ADMINPANELWEBCLIENT.INFO_TEAM_GROUP_IN_SYSTEM'"}],attrs:{caption:""}})],1)]):e._e(),n("div",{staticClass:"row q-mb-md"},[n("div",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.LABEL_GROUP_NAME",expression:"'ADMINPANELWEBCLIENT.LABEL_GROUP_NAME'"}],staticClass:"col-2 q-mt-sm"}),n("div",{staticClass:"col-5"},[n("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:e.isTeamGroup},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}})],1)]),e.createMode?e._e():n("div",{staticClass:"row q-mb-md"},[n("div",{staticClass:"col-2 q-mt-sm"}),n("div",{staticClass:"col-5"},[n("a",{directives:[{name:"t",rawName:"v-t",value:"ADMINPANELWEBCLIENT.ACTION_SHOW_GROUP_USERS",expression:"'ADMINPANELWEBCLIENT.ACTION_SHOW_GROUP_USERS'"}],attrs:{href:"javascript:void(0)"},on:{click:e.showGroupUsers}})])])])],1),n("div",{staticClass:"q-py-md text-right"},[e.createMode||e.isTeamGroup?e._e():n("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"negative",label:e.$t("ADMINPANELWEBCLIENT.ACTION_DELETE_GROUP")},on:{click:e.deleteGroup}}),e.createMode||e.isTeamGroup?e._e():n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.save}}),e.createMode?n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_CREATE")},on:{click:e.save}}):e._e(),e.createMode?n("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"secondary",label:e.$t("COREWEBCLIENT.ACTION_CANCEL")},on:{click:e.cancel}}):e._e()],1)],1),n("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.deleting||e.saving}},[n("q-linear-progress",{attrs:{query:""}})],1)],1)},te=[],ne=(n("498a"),n("e62e")),ae={name:"EditGroup",props:{deletingIds:Array},data:function(){return{enableMultiTenant:N["a"].getEnableMultiTenant(),group:null,groupId:0,groupName:"",isTeamGroup:!1,saving:!1,loading:!1}},computed:{currentTenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allGroups:function(){return this.$store.getters["groups/getGroups"]},createMode:function(){var e;return 0===(null===(e=this.group)||void 0===e?void 0:e.id)},deleting:function(){var e;return-1!==this.deletingIds.indexOf(null===(e=this.group)||void 0===e?void 0:e.id)}},beforeRouteLeave:function(e,t,n){this.doBeforeRouteLeave(e,t,n)},beforeRouteUpdate:function(e,t,n){this.doBeforeRouteLeave(e,t,n)},mounted:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!1,e.saving=!1,e.parseRoute();case 3:case"end":return t.stop()}}),t)})))()},watch:{$route:function(){this.parseRoute()},allGroups:function(){this.populate()}},methods:{parseRoute:function(){if("/groups/create"===this.$route.path){var e=new ne["a"]({TenantId:this.currentTenantId});this.fillUp(e)}else{var t,n,a,i=h["a"].pPositiveInt(null===(t=this.$route)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id);(null===(a=this.group)||void 0===a?void 0:a.id)!==i&&(this.group={id:i},this.populate())}},populate:function(){var e=this.$store.getters["groups/getGroup"](this.currentTenantId,this.group.id);e&&this.fillUp(e)},fillUp:function(e){this.group=e,this.groupId=e.id,this.groupName=e.name,this.isTeamGroup=e.isTeam},cancel:function(){this.revertChanges(),this.$emit("cancel-create")},hasChanges:function(){var e;return!this.loading&&(null===(e=this.group)||void 0===e?void 0:e.name)!==this.groupName},revertChanges:function(){var e;this.groupName=null===(e=this.group)||void 0===e?void 0:e.name},isValid:function(){return""!==s.a.trim(this.groupName)||(p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_GROUP_NAME_EMPTY")),!1)},getSaveParameters:function(){var e={Name:this.groupName,TenantId:this.group.tenantId};return this.createMode||(e.GroupId=this.group.id),e},save:function(){var e=this;if(!this.isTeamGroup&&!this.saving&&this.isValid()){this.saving=!0;var t=this.createMode,n=this.getSaveParameters();E["a"].sendRequest({moduleName:"Core",methodName:t?"CreateGroup":"UpdateGroup",parameters:n}).then((function(a){e.saving=!1,t?e.handleCreateResult(a,n):e.handleUpdateResult(a,n)}),(function(n){e.saving=!1;var a=t?"ERROR_CREATE_ENTITY_GROUP":"ERROR_UPDATE_ENTITY_GROUP";p["a"].showError(d["a"].getTextFromResponse(n,e.$t("ADMINPANELWEBCLIENT."+a)))}))}},handleCreateResult:function(e){s.a.isSafeInteger(e)?(p["a"].showReport(this.$t("ADMINPANELWEBCLIENT.REPORT_CREATE_ENTITY_GROUP")),this.loading=!1,this.revertChanges(),this.$emit("group-created",e)):p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_CREATE_ENTITY_GROUP"))},handleUpdateResult:function(e,t){!0===e?(this.$store.commit("groups/updateGroup",{tenantId:this.currentTenantId,id:this.groupId,data:t}),this.populate(),p["a"].showReport(this.$t("ADMINPANELWEBCLIENT.REPORT_UPDATE_ENTITY_GROUP"))):p["a"].showError(this.$t("ADMINPANELWEBCLIENT.ERROR_UPDATE_ENTITY_GROUP"))},deleteGroup:function(){this.$emit("delete-group",this.group.id)},showGroupUsers:function(){this.$router.push("/users/group/".concat(this.group.id))}}},ie=ae,se=(n("d3cb"),Object(C["a"])(ie,ee,te,!1,null,"1578f13a",null)),re=se.exports;B()(se,"components",{QScrollArea:I["a"],QCard:A["a"],QCardSection:_["a"],QItemLabel:M["a"],QInput:K["a"],QBtn:P["a"],QInnerLoading:S["a"],QLinearProgress:G["a"]});var oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.filterOptions.length>0?n("div",[n("q-select",{staticClass:"bg-white",attrs:{outlined:"",dense:"",options:e.filterOptions},scopedSlots:e._u([{key:"selected",fn:function(){return[n("div",{staticClass:"ellipsis",staticStyle:{"max-width":"250px"}},[e._v(e._s(e.currentFilter.label))])]},proxy:!0},{key:"option",fn:function(t){return[n("q-item",e._g(e._b({directives:[{name:"close-popup",rawName:"v-close-popup"}]},"q-item",t.itemProps,!1),t.itemEvents),[n("q-item-section",{staticClass:"non-selectable"},[n("q-item-label",[n("span",[e._v(e._s(t.opt.label))]),t.opt.isTeam?n("team-group-icon",{staticClass:"on-right vertical-bottom",attrs:{size:18}}):e._e()],1)],1)],1)]}}],null,!1,3018842066),model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1):e._e()},le=[],ue=(n("7db0"),n("3863")),ce={name:"GroupFilterForUsers",filterRoute:"group/:group",data:function(){return{allowGroups:N["a"].getAllowGroups(),filterOptions:[],filterValue:null,currentFilter:null}},components:{TeamGroupIcon:ue["a"]},computed:{currentTenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},visible:function(){return this.filterOptions.length>0},allGroupLists:function(){return this.$store.getters["groups/getGroups"]},groups:function(){return h["a"].pArray(this.allGroupLists[this.currentTenantId])}},watch:{$route:function(e,t){this.fillUpFilterValue(),this.currentFilter=this.findCurrentFilter()},filterOptions:function(){this.fillUpFilterValue(),this.currentFilter=this.findCurrentFilter()},currentTenantId:function(){this.requestGroups()},currentFilter:function(e){this.selectFilter(e.value)},groups:function(){this.fillUpFilterOptions()}},mounted:function(){this.fillUpFilterOptions(),this.requestGroups()},methods:{requestGroups:function(){this.allowGroups&&this.$store.dispatch("groups/requestGroups",{tenantId:this.currentTenantId})},fillUpFilterOptions:function(){var e=this.groups.map((function(e){return{label:e.name,value:e.id,isTeam:e.isTeam}}));e.length>0&&(e.unshift({label:this.$t("ADMINPANELWEBCLIENT.LABEL_ALL_GROUPS"),value:-1,isTeam:!1}),e.push({label:this.$t("ADMINPANELWEBCLIENT.LABEL_NOT_IN_ANY_GROUP"),value:0,isTeam:!1})),this.filterOptions=e,this.currentFilter=this.findCurrentFilter()},findCurrentFilter:function(){var e=this;if(this.filterOptions.length){var t=this.filterOptions.find((function(t){return t.value===e.filterValue}));return t||this.filterOptions[0]}return""},fillUpFilterValue:function(){var e,t;this.filterValue=h["a"].pInt(null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.group,-1),this.$emit("filter-filled-up",{GroupId:this.filterValue})},selectFilter:function(e){-1===e?this.$emit("filter-selected",{routeName:"group"}):this.$emit("filter-selected",{routeName:"group",routeValue:e})}}},de=ce,pe=Object(C["a"])(de,oe,le,!1,null,"99756f9e",null),he=pe.exports;B()(pe,"components",{QSelect:L["a"],QItem:D["a"],QItemSection:O["a"],QItemLabel:M["a"]}),B()(pe,"directives",{ClosePopup:w["a"]});t["default"]={moduleName:"AdminPanelWebclient",requiredModules:[],init:function(e){N["a"].init(e)},getPages:function(){var e=a["a"].getUserRoles(),t=[{pageName:"login",pagePath:"/",pageComponent:function(){return n.e(5).then(n.bind(null,"013f"))},pageUserRole:e.Anonymous},{pageName:"system",pagePath:"/system",pageComponent:function(){return Promise.all([n.e(1),n.e(17)]).then(n.bind(null,"8fac"))},pageChildren:V.getRouteChildren("System"),pageUserRole:e.SuperAdmin,pageTitle:"ADMINPANELWEBCLIENT.HEADING_SYSTEM_SETTINGS_TABNAME"}];return N["a"].getEnableMultiTenant()&&t.push({pageName:"tenants",pagePath:"/tenants",pageComponent:function(){return Promise.all([n.e(1),n.e(18)]).then(n.bind(null,"5d6c"))},pageChildren:[{path:"id/:id",component:Z},{path:"create",component:Z},{path:"search/:search",component:Q},{path:"search/:search/id/:id",component:Z},{path:"page/:page",component:Q},{path:"page/:page/id/:id",component:Z},{path:"search/:search/page/:page",component:Q},{path:"search/:search/page/:page/id/:id",component:Z}].concat(V.getRouteChildren("Tenant")),pageUserRole:e.SuperAdmin,pageTitle:"ADMINPANELWEBCLIENT.HEADING_TENANTS_SETTINGS_TABNAME"}),N["a"].getAllowGroups()&&t.push({pageName:"groups",pagePath:"/groups",pageComponent:function(){return Promise.all([n.e(1),n.e(16)]).then(n.bind(null,"0293"))},pageChildren:[{path:"id/:id",component:re},{path:"create",component:re},{path:"search/:search",component:Q},{path:"search/:search/id/:id",component:re},{path:"page/:page",component:Q},{path:"page/:page/id/:id",component:re},{path:"search/:search/page/:page",component:Q},{path:"search/:search/page/:page/id/:id",component:re}],pageUserRole:e.SuperAdmin,pageTitle:"ADMINPANELWEBCLIENT.HEADING_GROUPS_SETTINGS_TABNAME"}),t.push({pageName:"users",pagePath:"/users",pageComponent:function(){return Promise.all([n.e(1),n.e(6)]).then(n.bind(null,"051b"))},pageChildren:V.getAllUserRoutes(),pageUserRole:e.SuperAdmin,pageTitle:"ADMINPANELWEBCLIENT.HEADING_USERS_SETTINGS_TABNAME"}),t},getAdminSystemTabs:function(){return[{tabName:"admin-security",tabTitle:"ADMINPANELWEBCLIENT.LABEL_SECURITY_SETTINGS_TAB",tabRouteChildren:[{path:"admin-security",component:function(){return n.e(13).then(n.bind(null,"b6bf"))}}]},{tabName:"admin-db",tabTitle:"ADMINPANELWEBCLIENT.HEADING_DB_SETTINGS",tabRouteChildren:[{path:"admin-db",component:function(){return Promise.all([n.e(1),n.e(14)]).then(n.bind(null,"cb68"))}}]},{tabName:"about",tabTitle:"ADMINPANELWEBCLIENT.LABEL_ABOUT_SETTINGS_TAB",tabRouteChildren:[{path:"about",component:function(){return n.e(12).then(n.bind(null,"d95f"))}}]}]},getFiltersForUsers:function(){return[he]}}},d3cb:function(e,t,n){"use strict";n("163f")}}]);